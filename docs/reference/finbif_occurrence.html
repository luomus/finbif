<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download FinBIF occurrence records — finbif_occurrence • finbif</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Download FinBIF occurrence records — finbif_occurrence"><meta name="description" content="Download filtered occurrence data from FinBIF as a data.frame."><meta property="og:description" content="Download filtered occurrence data from FinBIF as a data.frame."><meta property="og:image" content="https://finbif-docs-dev.netlify.app/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">finbif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.10.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/finbif.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v02_occurrence_data.html">Occurrence records from FinBIF</a></li>
    <li><a class="dropdown-item" href="../articles/v03_selecting_variables.html">Selecting and ordering variables</a></li>
    <li><a class="dropdown-item" href="../articles/v04_metadata.html">Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/v05_filtering.html">Filtering occurrence records</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/luomus/finbif/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Download FinBIF occurrence records</h1>
      <small class="dont-index">Source: <a href="https://github.com/luomus/finbif/blob/HEAD/R/finbif_occurrence.R" class="external-link"><code>R/finbif_occurrence.R</code></a></small>
      <div class="d-none name"><code>finbif_occurrence.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Download filtered occurrence data from FinBIF as a <code>data.frame</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">finbif_occurrence</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  order_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  sample <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  page <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  count_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"finbif_hide_progress"</span><span class="op">)</span>,</span>
<span>  cache <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"finbif_use_cache"</span><span class="op">)</span>,</span>
<span>  dwc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  date_time_method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  check_taxa <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  on_check_fail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"warn"</span>, <span class="st">"error"</span><span class="op">)</span>,</span>
<span>  tzone <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"finbif_tz"</span><span class="op">)</span>,</span>
<span>  locale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"finbif_locale"</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  aggregate_counts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  exclude_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  unlist <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  facts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filter_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  restricted_api <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Character vectors or list of character vectors. Taxa of records
to download.</p></dd>


<dt id="arg-filter">filter<a class="anchor" aria-label="anchor" href="#arg-filter"></a></dt>
<dd><p>List of named character vectors. Filters to apply to records.</p></dd>


<dt id="arg-select">select<a class="anchor" aria-label="anchor" href="#arg-select"></a></dt>
<dd><p>Character vector. Variables to return. If not specified, a
default set of commonly used variables will be used. Use <code>"default_vars"</code>
as a shortcut for this set. Variables can be deselected by prepending a <code>-</code>
to the variable name. If only deselects are specified the default set of
variables without the deselection will be returned.</p></dd>


<dt id="arg-order-by">order_by<a class="anchor" aria-label="anchor" href="#arg-order-by"></a></dt>
<dd><p>Character vector. Variables to order records by before they
are returned. Most, though not all, variables can be used to order records
before they are returned. Ordering is ascending by default. To return in
descending order append a <code>-</code> to the front of the variable (e.g.,
<code>"-date_start"</code>). Default order is <code>"-date_start"</code> &gt; <code>"-load_date"</code> &gt;
<code>"reported_name"</code> &gt; <code>"record_id"</code>.</p></dd>


<dt id="arg-aggregate">aggregate<a class="anchor" aria-label="anchor" href="#arg-aggregate"></a></dt>
<dd><p>Character. If <code>"none"</code> (default), returns full records. If
one or more of <code>"records"</code>, <code>"species"</code>, <code>"taxa"</code>, <code>"individuals"</code>,
<code>"pairs"</code>, <code>"events"</code> or <code>"documents"</code>; aggregates combinations of the
selected variables by counting records, species, taxa, individuals or
events or documents. Aggregation by events or documents cannot be done in
combination with any of the other aggregation types.</p></dd>


<dt id="arg-sample">sample<a class="anchor" aria-label="anchor" href="#arg-sample"></a></dt>
<dd><p>Logical. If <code>TRUE</code> randomly sample the records from the FinBIF
database.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Integer. How many records to download/import.</p></dd>


<dt id="arg-page">page<a class="anchor" aria-label="anchor" href="#arg-page"></a></dt>
<dd><p>Integer. Which page of records to start downloading from.</p></dd>


<dt id="arg-count-only">count_only<a class="anchor" aria-label="anchor" href="#arg-count-only"></a></dt>
<dd><p>Logical. Only return the number of records available.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical. Suppress the progress indicator for multipage
downloads. Defaults to value of option <code>finbif_hide_progress</code>.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>Logical or Integer. If <code>TRUE</code> or a number greater than zero,
then data-caching will be used. If not logical then the cache will be
invalidated after the number of hours indicated by the argument. If a
length one vector is used, its value will only apply to caching
occurrence records. If the value is length two, then the second element
will determine how metadata is cached.</p></dd>


<dt id="arg-dwc">dwc<a class="anchor" aria-label="anchor" href="#arg-dwc"></a></dt>
<dd><p>Logical. Use Darwin Core (or Darwin Core style) variable names.</p></dd>


<dt id="arg-date-time-method">date_time_method<a class="anchor" aria-label="anchor" href="#arg-date-time-method"></a></dt>
<dd><p>Character. Passed to <code><a href="http://andyteucher.ca/lutz/reference/tz_lookup_coords.html" class="external-link">lutz::tz_lookup_coords()</a></code> when
<code>date_time</code> and/or <code>duration</code> variables have been selected. Default is
<code>"fast"</code> when  less than 100,000 records are requested and <code>"none"</code> when
more. Using method <code>"none"</code> assumes all records are in timezone
"Europe/Helsinki", Use <code>date_time_method = "accurate"</code> (requires package
<code>sf</code>) for greater accuracy at the cost of slower computation.</p></dd>


<dt id="arg-check-taxa">check_taxa<a class="anchor" aria-label="anchor" href="#arg-check-taxa"></a></dt>
<dd><p>Logical. Check first that taxa are in the FinBIF database.
If true only records that match known taxa (have a valid taxon ID) are
returned.</p></dd>


<dt id="arg-on-check-fail">on_check_fail<a class="anchor" aria-label="anchor" href="#arg-on-check-fail"></a></dt>
<dd><p>Character. What to do if a taxon is found not valid. One
of <code>"warn"</code> (default) or <code>"error"</code>.</p></dd>


<dt id="arg-tzone">tzone<a class="anchor" aria-label="anchor" href="#arg-tzone"></a></dt>
<dd><p>Character. If <code>date_time</code> has been selected the timezone of the
outputted date-time. Defaults to system timezone.</p></dd>


<dt id="arg-locale">locale<a class="anchor" aria-label="anchor" href="#arg-locale"></a></dt>
<dd><p>Character. One of the supported two-letter ISO 639-1 language
codes. Current supported languages are English, Finnish and Swedish. For
data where more than one language is available the language denoted by
<code>locale</code> will be preferred while falling back to the other languages in the
order indicated above.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Integer. Set a seed for randomly sampling records.</p></dd>


<dt id="arg-drop-na">drop_na<a class="anchor" aria-label="anchor" href="#arg-drop-na"></a></dt>
<dd><p>Logical. A vector indicating which columns to check for
missing data. Values recycled to the number of columns. Defaults to all
columns.</p></dd>


<dt id="arg-aggregate-counts">aggregate_counts<a class="anchor" aria-label="anchor" href="#arg-aggregate-counts"></a></dt>
<dd><p>Logical. Should count variables be returned when
using aggregation.</p></dd>


<dt id="arg-exclude-na">exclude_na<a class="anchor" aria-label="anchor" href="#arg-exclude-na"></a></dt>
<dd><p>Logical. Should records where all selected variables have
non-NA values only be returned.</p></dd>


<dt id="arg-unlist">unlist<a class="anchor" aria-label="anchor" href="#arg-unlist"></a></dt>
<dd><p>Logical. Should variables that contain non atomic data be
concatenated into a string separated by ";"?</p></dd>


<dt id="arg-facts">facts<a class="anchor" aria-label="anchor" href="#arg-facts"></a></dt>
<dd><p>Character vector. Extra variables to be extracted from record,
event and document "facts".</p></dd>


<dt id="arg-duplicates">duplicates<a class="anchor" aria-label="anchor" href="#arg-duplicates"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, allow duplicate records/aggregated
records when making multi-filter set requests. If <code>FALSE</code> (default)
duplicate records are removed.</p></dd>


<dt id="arg-filter-col">filter_col<a class="anchor" aria-label="anchor" href="#arg-filter-col"></a></dt>
<dd><p>Character. The name of a column, with values derived from
the names of the filter sets used when using multiple filters, to include
when using multiple filter sets. If <code>NULL</code> (default), no column is included.</p></dd>


<dt id="arg-restricted-api">restricted_api<a class="anchor" aria-label="anchor" href="#arg-restricted-api"></a></dt>
<dd><p>Character. If using a restricted data API token in
addition to a personal access token, a string indicating the name of an
environment variable storing the restricted data API token.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code>. If <code>count_only =  TRUE</code> an integer.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get recent occurrence data for taxon</span></span></span>
<span class="r-in"><span><span class="fu">finbif_occurrence</span><span class="op">(</span><span class="st">"Cygnus cygnus"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify the number of records</span></span></span>
<span class="r-in"><span><span class="fu">finbif_occurrence</span><span class="op">(</span><span class="st">"Cygnus cygnus"</span>, n <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get multiple taxa</span></span></span>
<span class="r-in"><span><span class="fu">finbif_occurrence</span><span class="op">(</span><span class="st">"Cygnus cygnus"</span>, <span class="st">"Ursus arctos"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter the records</span></span></span>
<span class="r-in"><span><span class="fu">finbif_occurrence</span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Cygnus cygnus"</span>,</span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>coordinate_accuracy_max <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by William K. Morris.</p>
</div>
<div class="pkgdown-footer-left">
  <p></p>
  <p><a class="external-link" href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-light.svg" alt="Deploys by Netlify"></a></p>
</div>
<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

