---
title: "Introduction to the finbif package"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{finbif-intro}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
The Finnish Biodiversity Information Facility (FinBIF) aggregates Finnish
biodiversity data from multiple sources in single open access portal for 
researchers, citizen scientists, industry and government. The `finbif` R
package provides access to the FinBIF api directly from within R.

## Installation
You can install the development version of finbif from
[Bitbucket](https://bitbucket.org) with:
```{r install, eval=FALSE}
install.packages("remotes")
remotes::install_bitbucket("luomus/finbif")
```

## Getting a FinBIF access token
First load the finbif R package.
```{r setup}
library(finbif)
```

To use the FinBIF API you must first request and set an personal access token.
You can request an API token to be sent to your email address with the function
`finbif_get_token`.
```{r request-token, eval=FALSE}
finbif_request_token("your@email.com")
```

Copy the access token that was sent to your email and set it as the environment
variable `FINBIF_ACCESS_TOKEN` either for the current session,
```{r set-token, eval=FALSE}
Sys.setenv(
  FINBIF_ACCESS_TOKEN = "xtmSOIxjPwq0pOMB1WvcZgFLU9QBklauOlonWl8K5oaLIx8RniJLrvcJU4v9H7Et"
)
# Note: the above is not a real access token. Do not try using it.
```
, or by adding it to a `Renviron` startup file (see
 [here](https://rviews.rstudio.com/2017/04/19/r-for-enterprise-understanding-r-s-startup/)
 for details). 

## Usage
Check to see if a taxon exists in the FinBIF database.
```{r taxon-check}
finbif_check_taxa(list(species = "Ursus arctos"))
```

Download occurrence data from finbif.
```{r occurrence}
c_cygnus <- finbif_occurrence(list(species = "Cygnus cygnus"), n = 100)
str(c_cygnus)
```

