language: R
cache:
- packages
addons:
  apt:
    packages:
    - libudunits2-dev
    - libgdal-dev
    - libgeos-dev
    - libproj-dev
  homebrew:
    packages:
    - udunits
    - cairo
r_packages:
- goodpractice
matrix:
  include:
  - r: oldrel
  - r: release
    after_success:
    - R -e "covr::codecov(line_exclusions = list('R/finbif_request_token.R' = 35:72),
      branch = Sys.getenv('TRAVIS_BRANCH'))"
    - R -e "goodpractice::gp(checks = grep('(rcmdcheck|covr)', goodpractice::all_checks(),
      invert = TRUE, value = TRUE))"
    before_deploy: Rscript -e 'remotes::install_cran("pkgdown")'
    deploy:
      provider: script
      script: Rscript -e 'pkgdown::deploy_site_github(verbose = TRUE)'
      skip_cleanup: true
  - r: devel
  - r: release
    os: osx
notifications:
  slack:
    secure: wMCnhANWawCwdFyAhpdVKMwSIrblZ3WCk/muFZPWFELwYtv7SwlrSn6g04JykeFIU+JW2uOd+yvpQ76cQKyplbqAyTcceDQJfcguvH7FsMz7RvUqxJlfNQOGa0HAH3U/G7kQQ55CMwCxuG4MD7ohRjqLzBw4Pt9qX9kGysUPb9sLLckD2oD+LrZxgiyde1lzE6jvqLYM8cYvD+LU6WwQIeEwxseIk1ZLzw155hz8cbr4qD01X5SZShznbr+JHQRW0CDc/Dl1d4dhx9dzJ29ZcHxHDIRjpG68gj24+j2sbq2DLAGi219oWIvcdvRvo3bHFH2F/xBI6jne7nTRZntF9b4cy/8sMbKYkiYQqysOQsuZPHW+GDQveDULXW5fPTuR6u3ajX88wt65xWqgifi5RqseqKnD3fH7pNLCVtUEvbFMdalVitQUgOW3W1XNdRrI8NFOEG5uiP4PkVBkATkZzIGLMiQBQ/+xhdsfsr0SLyOaRoLNbzHQaud26cfnKjA7Io2PRqaY6WOJdcoCBc661j8nMekY9BFta9f4Hii2iu44qFs08j6sFsPS5OXutmtyKexEgS5kBsB+KBHE8fIv41Mq3cE/0Y+mqDh5nJD2z8wMqauBDtAgadqw660KjTLlP/dqUxobgY4wa9GXRbReUFI0fFvhTkyVg9eq8SYhIh0=
